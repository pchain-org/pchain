package types

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/ethereum/go-ethereum/common/hexutil"
	"math/big"
	"time"

	"github.com/ethereum/go-ethereum/common"
	. "github.com/tendermint/go-common"
	"github.com/tendermint/go-crypto"
)

//------------------------------------------------------------
// we store the gendoc in the db

var GenDocKey = []byte("GenDocKey")

//------------------------------------------------------------
// core types for a genesis definition

var CONSENSUS_POS string = "pos"
var CONSENSUS_POW string = "pow"

type GenesisValidator struct {
	EthAccount     common.Address `json:"address"`
	PubKey         crypto.PubKey  `json:"pub_key"`
	Amount         *big.Int       `json:"amount"`
	Name           string         `json:"name"`
	RemainingEpoch uint64         `json:"epoch"`
}

type OneEpochDoc struct {
	Number         uint64             `json:"number"`
	RewardPerBlock *big.Int           `json:"reward_per_block"`
	StartBlock     uint64             `json:"start_block"`
	EndBlock       uint64             `json:"end_block"`
	Status         int                `json:"status"`
	Validators     []GenesisValidator `json:"validators"`
}

type RewardSchemeDoc struct {
	TotalReward        *big.Int `json:"total_reward"`
	RewardFirstYear    *big.Int `json:"reward_first_year"`
	EpochNumberPerYear uint64   `json:"epoch_no_per_year"`
	TotalYear          uint64   `json:"total_year"`
}

type GenesisDoc struct {
	ChainID      string          `json:"chain_id"`
	Consensus    string          `json:"consensus"` //should be 'pos' or 'pow'
	GenesisTime  time.Time       `json:"genesis_time"`
	RewardScheme RewardSchemeDoc `json:"reward_scheme"`
	CurrentEpoch OneEpochDoc     `json:"current_epoch"`
}

// Utility method for saving GenensisDoc as JSON file.
func (genDoc *GenesisDoc) SaveAs(file string) error {
	genDocBytes, err := json.MarshalIndent(genDoc, "", "\t")
	if err != nil {
		fmt.Println(err)
	}

	return WriteFile(file, genDocBytes, 0644)
}

//------------------------------------------------------------
// Make genesis state from file

func GenesisDocFromJSON(jsonBlob []byte) (genDoc *GenesisDoc, err error) {
	err = json.Unmarshal(jsonBlob, &genDoc)
	return
}

var MainnetGenesisJSON string = `{
	"chain_id": "pchain",
	"consensus": "pos",
	"genesis_time": "2019-03-29T14:06:08.9945519+08:00",
	"reward_scheme": {
		"total_reward": "0x1048fd8377628651b000000",
		"reward_first_year": "0x2091fb06eec50ca3600000",
		"epoch_no_per_year": "0xc",
		"total_year": "0x17"
	},
	"current_epoch": {
		"number": "0x0",
		"reward_per_block": "0x454f4a543d46b786",
		"start_block": "0x0",
		"end_block": "0xa0668",
		"validators": [
			{
				"address": "0xd6fb7034433e11663500038c124d7c3abdd9d63c",
				"pub_key": "0x252EACEFD874E43C8FD22C25A6C4944C6B07274DE026EF4E2D0D8406485A5C4026DE2B2887E504441292E55E88FA5D78C257EC34563F7B3D17D5440DD99A811C736CF27C37A147F60B03A832CF8A0854756360E49E0BED31F4B1CF3ED29FFF43546ECD33547025B39BF6539E425DA7D78AB54BD020B73E4A3AF4F4C1A7FF2720",
				"amount": "0xfe1c215e8f838e000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x99c3dc791f29e98255c197e7fe96f0933723db3f",
				"pub_key": "0x5F8FA7502D9A61725850059DDF1C2A7022FF61980E3F2C75B3FD8B2B850E9AED439F51A16D03D9928BA09521D522A39EC1F4DBD3DAE2676A358787BCE08F8B4D4440CC7F95DE75DE9129FFCC293B847CD591CCD5A3AAE31117154AAEBBB5F0DE44FC4CB488D80DCE2AC6F4113FCD19382CE7F3EC749740CC181AAD4196C1FB52",
				"amount": "0x30aa4e61f2ec5df881e7b",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xd0ab0c3a8391d6545f27ef785103647b673343b4",
				"pub_key": "0x3EFCA74243EE8F6387926EF0DE58E5809EEAE960FDA19FB6600AD43DB135D8918BE28F60EA348EB5D070F9F8DDF5250BF6B4AEAD234BF3285AFD95CAEE5FBDD155B3D70CCF4F06EF4B49281FA8340F47CD6958E1D9FCC7455533DBA23220609C2D306638520F9F661D34CB87775E7DAAA6A2994846A9FCB4B1802CF6CEF2D33A",
				"amount": "0x3935aa65662d92ddfff00",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x01d40dd4ac3a2dd4c5cc4ef36eabc7cc5d2d0593",
				"pub_key": "0x7BFEDE7D184E1D4F238229A73714672314637E9A50E6BE490F0610C34B04982E1016084FEE440C7240052B47B69D5C8DEF45D01F35BE8649F503EEAC3F4B904F64152DA3E037C8F54D4130A5C6819848F8C41414DFDE81AE269F3BA336B54F2E2DBCB19FEEBFB04E0161F0856602F21F0766AB22208FE2408A858CF7399B7B82",
				"amount": "0x288d3c5d7d8408b000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xf45ced1304c7dddd6a7012361f4a3d8f9ea03b7f",
				"pub_key": "0x120DD94D142A4B90F0CA9AF5C41742647A6EEC30BCB8D39D4BB5FE56FD8B7C5642C25718B5A393746B774328CEAD54CD996CFB39ED94859AFFD828D9CDDDDE196316D66ED52D2C6B7F2994E9150620C71F4DF80C6DC4B0835CA3258B72CD8C428A7A8E496A51072B13EDC5E0E2A0940C7F65AA1951C98E51112C2411D7F22C86",
				"amount": "0x37faa68fd7df8dfa7a000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x614036008da1b1dac87ba923c6a883a1b80fb136",
				"pub_key": "0x66874C606B2562BF491D4816EE5555C62409F5570CFEC0BFB680DFA71FFA85E1461DDDDD631194A5E2CDD199E4D733F290C6DA88F8055322B264953C281687548E2893137979150EDCAB24862374965321C522E868D5AC34CA1961B07691D6EA42FD2DD66831C5C53B590C847E5E4CDA4B53089471719AAAF950DA3CEC0954FB",
				"amount": "0x98774738bc8222000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x8052e254f37a76d4cecd402cd48955aefd78091c",
				"pub_key": "0x4B6D9F0FB679C56273A6F1A9BDE9FF01BF7228BD83A100CA7A991FE3F4AB79714059175EE47C454D61F2DFA26C42F01013CAC4B4A7D2DFAF81FD24DB29BCD93A5BA230EFEF588176890D7790E061708F7311F6C5A3E8D5D5B73BFB34EAB84A2D318E13D38A9CDCA832B347F66953DC53D33F059A15B3ACD528E9F943055FBED6",
				"amount": "0x9d8c5221070f01000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x07c903846cc6c8ed62838771939a566c63296e1d",
				"pub_key": "0x33819232D0CC3AC2745C4C566CD5D35650B388D93476CDA3D0FF658F4268D0DF8711D6381E5D2EAF945CE86CC980D93CE8C354D2283A92622C54DBDA2F1569C333F83A0BBC9C247899437DAC0F346908D6ECB0CECB8CE09ACA626A4571AFEC3B505E55C198EF4EEF60CD12A0392850BE32845AC72492E31B493DD4C60E9EDCD6",
				"amount": "0x9bdaa3d398e00c000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x0db8de123a49e81eb056b78151ee6729bbb865ca",
				"pub_key": "0x4B10725342E36EEC9026E36B130F4684037A055F10EF32C04A2C33268A0F4EF703213C99789E561D815D235F0A6801C5F2C2D67751E4163D799123E48D29A1FD2DCB02F12EA035938AD4820506A0E7EA2755ED7410CA6715846475981F7965F310D9CA4C0EF85D5B5BDBF5BA050B226BBD09937B076F0CBF4BD167919128C199",
				"amount": "0x9f3e006e753df6000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xb25b83408b03667a277161f0260dfed78a871ca4",
				"pub_key": "0x00EC9C6B218BE5379734F0C3662A03B08165BAA2145AFB2A9ADA90661A8A28C706828001DFFF479A023D02C8C20F3ED53CDBFE5698145815028152AC601FACA90AE9E7CDE29351A8C26CBE8FB55BB53F97F0431514F863E654042ADA71E7A7BC31A4433000D6A4E3BDB9442798A9316E7F4FF62ABD51976D01F8E8573C0270B8",
				"amount": "0xa7b667f19c28bf000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xf35d12756790c527f538e00de07c837a45e72732",
				"pub_key": "0x384D2ED1C6B5D13DC0AACF5AE9663F7AC90D6FF11653142AB57FAAA66D2FD28F664A566148A2404C186F504345514B22A7F8C8DC3010F5C8904E459AD23EBDC40F990434FC32BB6751146A5E810040165F578215B9BC23BB6EC097E9B175EFBC5D1E3A1FB0509394B5172808AF8C3AF6C5A4A4A124FFF29423D66BB600D9AA4F",
				"amount": "0xcb49b44ba602d8000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x715a0736212f16a152c7f921af6ffad117af3229",
				"pub_key": "0x4190B45E05FE76A24E5685E387DCD0F0B3F27092ACD36E15CB1DA80395F2FDEE603DFE58DA925D7E54EB3AA7BE362B3B25945EC298DEC6294926BB004A5E524E63EDB2A5F79C61E6C16813D3F737506767B10829599FDB54AD81D8864503C2E00FAA16E9F8EF90F9AA6724D6AFD8ACD64842E57664C7440EBD4FA6228D25471A",
				"amount": "0xcead10e68260c2000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x6df9a65a7385aa70736c7508012060c0bd70adac",
				"pub_key": "0x1FF12F9943968D31022B58C6FE038BA904AFB6013C85A585A91CD677C2F33E6A308DFE08C5AEC5A39ACD3BC758C0EC6AC7C1A080A46DCF1AF03450948F2663298A47AA2FA8C4FBAC15CCD9D52628A73ACF542D6B2E424363E4ED0E3B808C89020B36B2D6FA4C882039FEB7D1214A072EF48814754AF178CDD4D6B6C43B47E800",
				"amount": "0xcead10e68260c2000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xd71b10611d39d5b4c2b2aca0f9c48d0fd60941b8",
				"pub_key": "0x06A91A977464107CC8C29803FB6743583C146A49D14826906FE2ABE5165819813461A706D8EC91C7AB411F3C6CE233B2522D9FA1F4D163F30EA9DF21E7B38DB902021CEDEAFB0E0767A62B3DE85FF6FDB7C649FE6FB70E81D3C6FF3C40B8FE92190361FA887ED444E577F62339A91B4ACF5791A4BDA157596F19BE11BC166AE2",
				"amount": "0xccfb62991431cd000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xb38a0efd97eb49fa5085634de85594fe4e0a69bd",
				"pub_key": "0x01E9304F78CF19D2AC9BBB5FB11CA67A719B36C9EF17FED799F50C050854AF3243E03C4BED8A31A7DD9A790A8DF1C6E9A6F031FDA78D547C7B037D34AFA1A92A332DDED2BB4689F204CC18052F66DD8ECDCC26A2B9E6C13E39A3A2670E0C7E2E70A35611477DD1A2876BB5F0A8284F64D6D8BE0C99F711B0A6419382D02CCEED",
				"amount": "0xd2106d815ebeac000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x6645eeff68cf9a42846b9e7608a6efaf2308b528",
				"pub_key": "0x09D86167A0D0B65E5F87E2BCBCE62562BDAD5D154492EE374507CBAE7CD035B72E8721B384C75156293CD1B3B20911C4B9B00380E97C66A96F2FC510F9667937519AEF55A47D22E7D0EC8DB5AD4F1B8A4E44DB9B48CCFEA2609D4DC65E7E781255B4EF995CFAC0724CCD6FE17296B54665DA59990FA0AF17E24333AF73486DA8",
				"amount": "0x9bdaa3d398e00c000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x0e1129ea2e92b0a049192c2c63cbc201f7b2e634",
				"pub_key": "0x29F160C86B66C45750E316BBDA8F2A93E1C9FB2D662F94F431C0CDA5ECA9AC51037AD6B6D2CCCFF5BCDFD729F665BF9E502B1213B571A83C69CC5DFC73BEC86169DCF3663EE33C6E3CDC66706728F54C26426E3A553C0C9827CE9642591FB83969B655B3D6EAFCEE1820480F90DA9EBCDBBDF05508EC8DC687FE82F97281AF38",
				"amount": "0xa604b9a42df9ca000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x10ff593f75a5f53ea6270efda9fbb51d7b0aeae8",
				"pub_key": "0x6A4055B0E97BBFD2C4F6ECB627179F93E8784BB823723289078D1895BDBDF4916E3C6E77DD5B06B30CC32C99145DB418A0B63AAF959C3E9D92754EB6A0779EF57B6BE226BEC5B42DA0006D7D759F535C922F1E18D4218F597143F7C07C5BD88E04380B724B04BED97961BF4FB57822A278D6A7A5FFD4C5966647DABB847FCE7B",
				"amount": "0x9f3e006e753df6000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xf2e81e37c8f8710780b3cf834fc16aa3375699b6",
				"pub_key": "0x3FCD65F3C262C8ECFB7F44A272A7A83ED8E82A237E354E64A49CBDF5DF1182398DE9CE855D17C75DBE7571D166BE665F104B848C4164648CAED4183CFB1C501313B58F8F062034E335CAA620DBD90E9764A35A7C6701D267265DAC3CA44432D68C5D13F56FB982B303FF109E0D451D86C8FDC378469C9C8B587B376EE54F88E3",
				"amount": "0x98774738bc8222000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x2909db9e1668424806475aa4bba543431e785228",
				"pub_key": "0x6AE8AF889FF00DA02A985680166E59A61C10E184348581AABDEE62704D42FBBB16B43326CBA5B433CDD433196A02304526893C560CECC5B3D730B684213E1DC80847B2385DD1EF55C05E432D9DAE2E6E7865CAA017B1301E97A0CD982AC5CD064E9A4EF25DCA8C661B7194556B044D9C88B57CC77D8F7624AFFBF386773D6FF7",
				"amount": "0x9f3e006e753df6000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xd88a986de29c97a124d7169fa5cbeff73e28bdd2",
				"pub_key": "0x6558B4AE4D77C368956FA2AA0B5AC12ABC37FF4862B6BF8CFDDA6F9DEA28FCFA40010F196D5DD5245FD302FDCDF248E256656F59495B3A00879CC751476EBD173209F993E57E2E89AC4A156E9B17AC15EB8487B65DB6908E042CADEC66E516AD29EBA0FB33A40414085DB31507A8B7FC483153BAE6056A96241669E472AE0CB7",
				"amount": "0x37cdaff0d96b53c2633ec",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x723c1b86c78a04c4f125df4573acb0625bfc69a5",
				"pub_key": "0x769B924BBA6DAAA2534D469B0BA10761027D6DED52E16CC35068D516CCE76E80008BDC8BC54B268CCD53DABB994FECDA86ABD9F07F89D5DFF44977CEEA38CEB9206BA582FFC42E1A2FD460AAFCB3A212F5D37F9E76B23C2F4A5A17D00A99CBA160310DD2AC30AF74272938E7BF12EDE94F2B91E2A64510CCA56565F42F99F9DF",
				"amount": "0x3845b6592ef2f8112e000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xa8be4f3ee1cd772d22927fba3b1fe16e9c5ac898",
				"pub_key": "0x761F2E0C01C2322D6367922E3E9DF0E0892E843588FB6FE12925F105E4D87B3952076B705BD0766C43DCE5712A7119BBFFD7C654B7730494682E1FBCB5F1907547BF63676C7E205E0CB13C8C84D1FF680A5FFDD13CF547367C81AA46D4B4A07B6E493D953D8FE9F51362D205A1C2440E98FF3465010ADF7F5FD012DBD7AF16CB",
				"amount": "0x2c623a55b93ecec385d5f",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xea80fd3fcc41441075fad44302548cd484a6c7af",
				"pub_key": "0x45696468A095859DB390ACFE6503FA2F3EA1CACBB01BFECA40967942609D81281BBDED304FE4370724711F4C136AEA7D63EF8B32BEA4122DBE34A8E172E96F31660EF4E39C81ED3159145F18E03227E2FB87C303F23C76D9E44A9869761EBF6507DB51FD0C948A38614183ED77327B1589692B1ADA45FDE582382AA80407992E",
				"amount": "0x25064f936cf9d63d7c000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x0833a5e02e12532ec64c2ac1ebf3a1014efea2c5",
				"pub_key": "0x671C039D056EFEC2ADE95A06C050B04702CD0E37E55161984FE57C099E470EF48023174ACD08BA531FFCF573DC7C9FA9691BB64A9AD7A8303C18FB9A1385833381E8B4245CA87D6FBFCD2F4F30BBAE885C8EF2A04E37DF374FDE61A4E2172BD336E959E070DCDDA12700721B556068C9E6BD2B3B47EBFE963640B4B9FD406B96",
				"amount": "0x85d4c9e5007d9b000000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xf92f0b506feb77693c51507eeea62c74869ff0f0",
				"pub_key": "0x2D5203465C2F6AC74BE103D4B43FDA2ED3418963F63E44F7B3003150B9D0162F78D53EE8A2A76EF7145B3D9B03F9C8A38EC7461B51A1111FFFE632BB0041E7930E73E5A0FFA2F8BD05A8BB9ADBD4B45A885F16D70C4C2FF18DFE314BFC7C8F0C25CF418D01300DC407C8B4ECC23F1041D7BCD15B837E115FF1F6BF5B75639952",
				"amount": "0x28180df15b9dcc5432d10",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x1caf686131a75f705e2fe211dfbc67840c975861",
				"pub_key": "0x76027F1204F86198EF530DB2DD556D137C19DC57F75D962AAE56E3A83526CB2560B9146541AE5E543BB03081CF71B9A23376B9100E8E1767BF1519E46E8B80EA52A92E4FD814F5ADE6873966EBC4F4225AF5D6D620CE76A486128533F0E0119586CDEC89441B9E52E7BCB7C2428B01D7AC6D0FF392FDFE4CB04DBFD63A2F49D0",
				"amount": "0x27631539e48004a8db0c0",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x12e644905c8525ab704a983bf7a9c8bfbdefcb1f",
				"pub_key": "0x843ADDB1A2812CD8BCA7C2F3410339453DE2A32977D65C7A11B742109B0D15EC7171C9F2FE6122C88364901CCACA3DCC81FF6CAA72EE95EDCDE0BFE92AF071D77CB67AA99203DB416FF8640DFE293D2D33D50EDCBEE2E26ED731E854C7C1B6F975618813A975A8EE55C7BFF2FFC593EE8A0B20E15DF270ABB81FDAC3C8EC0899",
				"amount": "0x3076ac6b16fe382a37658",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x175624f126addc745f912ea95e7f6a02d501b1a7",
				"pub_key": "0x707F48DF6D3A23898FA0CD2050083F23D829976CE01283CE218E80F662FB51BC5B33BD9A52683DDE443F8B25064AB96BF5B4FC0928413093F17786721D9A1D84222FA7D6A7E0675C0BA3CBA672C75A9485AC14B9CC92AFAD5254BAC6777958274DAC6EC1860C80D26A8504898FAD2A69F775C2D5437754C063CDB3DBC3500844",
				"amount": "0x42367acdca371427490a0",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x8fd54ed3637f59eefd0ba9d213fe30efe9d89ff3",
				"pub_key": "0x8F2A1ED136DDE2262A387BCDC0DE3F102705650C4EB1AA7A9A67CE96ADDE2BB7393F4AB6FF2D105447EA7828DB07FC039F20AE129A45D26D8BA647C4D6D056678676E66FB64BC56C0251731A9366B3E3FB0E0E3D6BB4D8168610667CCA1BE2BC7A53BA6B7A0ACAE6F3D21DB8E3653B596ACCB19AEBA258F1F21C567943E845E1",
				"amount": "0x878678326eac90000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x9351e3962a708c92b78bfe640d224f33055e90ba",
				"pub_key": "0x79E424ADDF4BDD02D1C3934EF41CF72CE6C46ED769F88784CC929A9B83FDD49F20D033E4E8753733E0540E4B15AFFE4FE5A76A8EB68C54F2FFA6E8FD3C05A8CD4228ADC164302707FBEEBA7E9E0FEB0D196A50A7069EE4C443563956B635C1C83956E92DD409EE9DEF79C4F55D529361A87C010F8F7C64B51CA0A627C52645CC",
				"amount": "0x784757798f05f3000000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x6975d3c17d8809e9c7d17769c6dbd327893f84dd",
				"pub_key": "0x58029D47330344BC000EDAF6B359A5FB4C040A6833B4F8FEF0F91C8E4FEF8C015A63C8E6CB5067AAD2F2B84187F54ABBADA75C3B46D9232C4DBF72AA68358441624C3EEBD987A7246DBC7451F5A8101FAFC730DF8EE37AD603193266F47C3F6205A8CBF02BF4F2C9BC52597B95BEC480275D4C7D67A2C247EA3211858E936DDA",
				"amount": "0x98774738bc8222000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xe2e476156b69af23a12750426734ded8bae7d01e",
				"pub_key": "0x5520172EE7E9565FC28FE351807543FB4E853B08C5E3690F12EBAA001797CC43659CDA8C9E85F149797181676DB86B8DBE9AA44894A69F7EE5FF3B25CF656A7E5BF5A3D094521F036AD894F4156FFB4D2D3419FB1539EE39BED059C8C3D2B60B4C1B692F8DEEE0BECF1D26BF869EEF16E635B5015B8C328276DD7FCEE5C01701",
				"amount": "0x9bdaa3d398e00c000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x566c5cecd64f0fe75d6bdfaf6bb8a20f16cb7684",
				"pub_key": "0x4FF5FD8E84BCB056019C9D0A41182E3B4F225D7D27F4A661C0CCDBD3120FA2434E6D0518957EDFE06DAF8B9E26736F81CC00D7A1705EF8D4E1E7E2797CAD6EDA8736C26B6C6E5BBF28DFD21B4AE3020F21D9DB9A5DD16381CF360E503ABD95ED7F8C4BD31ECDE288908203D26A6F1F8A404466BED91C6932598A3AD16C528825",
				"amount": "0x1af45d210a101dc368000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x2ddd01fe6c2ebb94d43cc9d12de84e8eb2ecb6ea",
				"pub_key": "0x5CD7BA9B8FDFB9F2AFFBF44DFE10D7E318112488DC42BECE21AF669C53920A4505CCA935A85CFAD079287C3353FCCF4FFCD2F0DC5CB7120C9A9DE0F3D59FE98B86DDA35966F34EBF280D5AEF6BB2B99D9DBA16E83F94FDE2B0E4B8C69343D05C2F4E9CD5B77FCE236C5E417073BE5F5D411D2DD86C1F7880CAA608B3C4E68354",
				"amount": "0x6de87f9ba2f4d54bb323",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x0168647b3d5981d9a0711a0339052a016fb6e1b7",
				"pub_key": "0x59857904F0311A8CD896CA7D2FA194A9FC0BDAABF1BDF09618FD592BE451F13612BA89E57A58AFA40A15354AE13E6185DD0208ED9215BB365CBE51E40609869560EE805ED93FD776B23E1EC9F0FEDF0D4668A268835DC82C3CCAAF5F3D4F5C718C609B12FF78675C3E4CFF3E902BD9E954001FF94D64AF14DB616751C0184C18",
				"amount": "0x3bb40760b029a49732fa",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x5a8e69a43e22f882de1b6467f0245bc06d498046",
				"pub_key": "0x5327EA73F0AC25C3467AC9A1D3CC5206482DD4CAB09AD9275326738F53E5654A392009BE60FCEDE9810A62F27639BAF2F327809E0E3D0683DDBCE597FF37AC2F834CE9A8B517DE04EAF4A60CCE78FE25461DA763E7E317C3CC4565FDE71E8F0A1962C94CAB6BA52BC14C3CDD878427D45CEA327E0F4996792D6B5757173E975F",
				"amount": "0x4aa0b66e6e7eaf3be0000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x7ea3fa5bbb62e3f430019a5b46f74bf4ab08f49e",
				"pub_key": "0x01B583DDE0B65753D55071C65D05F5A6577BA2C80E059D3BCDD5B774222350AA5C490DD6A52AA41B58458920D30665DC6B3805A8189BF5D5DE9ECB37A823557F252F9C5E0634B43EDBE76A3C0CB1EDF17D01E7F4860CF15977DF7438E63FB98842EF8F5FD2DB0EE7C5BF5E599E1419BBF871D3AC143670A41B3350D197967736",
				"amount": "0x13b46be92e9dc0ab13aa7",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x58599d138f246ad9a2bc2d44dc145006aa6107f9",
				"pub_key": "0x708E1AE0F642137900ED26AFC93E471BB954D4438EB58DDA1A47308BAF5E75293D4C8417AFF6FD2BD3FBD65EE3839C662C569A988F4EC6C3CF4E1143D62E36D86969AC8F89C7D7205E2E3445B0A441A20C00A4032B0D923AAF6FE6F455F64A4D6395D59BC6977F7B52E4974A1ADF5657D779D5344ECDCB11F58002F5B8F14990",
				"amount": "0x276ce6e74471a349a000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x2f9a2b62a8a7030d71814101ed06d9723bdbea2e",
				"pub_key": "0x197D82F53E66444E570FEE76C7755C3D6051E430229DE70DBFD20CB4D66F7EDC7ACD0FC9D88CDD896582811752827018D7A87F0EF79152CC47D961C9F3EC42AA66B737441D35D046D2623F93472C98C06C876C0B153EDDD13C41F6A6B10F47BD23FD72560A114F567261A2AACA23035075C910C5BAADE8DD602E00F6FE09D4E9",
				"amount": "0x2453a0e26c3b772eee60",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xc4483b02ce41185de5bd4fd25f72050d3109db88",
				"pub_key": "0x09C90AE5C100272911936FC03B059BC005AA844EDB74B9E5EBE688A610C08A163158706762D15BEF158230667498781FB6156624CEAC40269104CB42D020EC1F406D4C1BB9E42092FB6FD2CFCE6AB757B765C29A5AFFC4AEE02E986DD45CF32D186DE81823E0964B0B6FDB3C7E0940CBC4646C7031CC29A6B8D7CFE5D9A6A9B6",
				"amount": "0xc7e66687c1ed3d948e0f",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x0cc0a3ad2d371d63f2c8127b650a51d0d5ab7a9b",
				"pub_key": "0x0D7559D124247DA742C994EE490DA9811D619D19DC5A5CAB9215A7888E29C555030DCD73922913323A64F09EACB103F25A4EEA59C920AA317C168EDBC593B56C5ED44989EDB54349E096A045CCCB34CBA0BBE1BA941E14BD7459BFF61EE69CEE8D3F0A8CE5A0DB649AB6AF3499AE56A38D880286A4F4871499E32C47F950F9EC",
				"amount": "0x435db00f36c135a220000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x1af7432241f03a83df616b33c00ad9d8ee6c59be",
				"pub_key": "0x4E1DB805768EF169B7B0413E105D1EF6CCEBB893A908FAC7E4D19F5B066799A0157C30BDCC5CE14EEB1D4B647537F465DB1B450B0F2142F0F2B03DD282E457CA726AC377304000CE0B0841E23D87F7EA8F3F82EB8FA68D0F27C4970F14C09F488D13D173A4993CC283EF4BBB162561FA18970D12EE7EB87AE9996D2090412702",
				"amount": "0xa8aebd4413b5bcdacccc",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xef470c3a63343585651808b8187bba0e277bc3c8",
				"pub_key": "0x401023F7DB705D3EFECDBBEF73EDE875B7E9FD5C429AD562B4214D31672C853F82F442758D8B772FE9B09692784FA9C4687DF4C7FBCC6575E6648DC3902949756664D9FD39DFB83095836936329418E641FEADEDDCB27BA522C75FBFFFBCB87C5E13274D0C8B81648B426A753C1F7D54E0C16D20C522A6E36AF920EAA27FBEEB",
				"amount": "0x7b019a34f24300251abf",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xe59dd79111a34ee11ce1686f1c3e12d8d1e63652",
				"pub_key": "0x37D1E22CEDFD32847ADF2F600E3CCA06615E8BE943210484398EE71113C7F2F718C63E86AADCD545B934F075BA8A426528CF654971F7197FDC93CB97063E78FF6FF33F3AEF7698FD58B0DE9CC356DA7271D647B12A2C4E280AE1AB46E10D693E36CE83E72176416E464F7DDA886FEB5C0BD48A88539E689176397868865C2CC9",
				"amount": "0xd71a0bfbbff75c1da3b6",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xe8a9d428342507c2b4f6ba442cd29bb8e48f6ec4",
				"pub_key": "0x4436876D3A288300ADB1085C8CFBF752EF87FB62A81BE86C568D16B764F5D326384C49A50F8DD1259339F2DB374E7ED5D5D8D83FDC350CCA7F9C71DF7C0A16AC202B44CDA538FAD12443011E005C21447473B63B5304D8174E253C35171590EA5A4D004BAA6E2BDB3D437A97903BC93D23042D56232E8BDB2EF737B759312279",
				"amount": "0xb4c6154f013c6241f84b",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xa8e6fc44f082bebbde0ddf34597b40653e293e19",
				"pub_key": "0x63FE657EBA5D8569D4B93B85B3B88FD4C2FBA803D6C3428A31183B2DD7EE8D717EB65FFF8C7B5B3CBBD1728D0C6B7A4C8DF3706B287944A1165D5A8996CB0EDA4545AB0ED222717507E9A6FC128CDCFAEDDB800111110B1DB848710CDF34145B67C6837351E5033111902175E5DDB427A80F1532B9D62587C1093396049BF711",
				"amount": "0x2378317532f729b000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x0d80bdb335b44b4090fbddd112f451ad32561e1e",
				"pub_key": "0x7A15097ACFDCE745BF8CC27C11743A070CDBF45C42E29F9A38A4F84F539B7D69869F9A2D7342236DC23C9C23AB9F8204BDAF056D34C44674DAF98DA9C2361E98770E15CB061631E786B6BA4BD3BAB4A43D4EEE6FBFD668CDCA6897E680D2211D55B025D48FFC91EB96F0B978257D8BF90E9BBE38CE2DC1DDEB49A284D757EE12",
				"amount": "0x28801863b1ce56000000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xdb76d6ecce3b1f8d764741d9cdb3d4f294e1dce2",
				"pub_key": "0x56E7CBF6422E873DD1999E34EABE237F9817020C528131427B6B85B31FA4A721236AD152DFBC79B992E8D69743A644758854A9CCAAFB53AB27611529842F6A2847EDFD28FAAB2B0DA9BC4A9A927DC0C872BB9517CB4CD6EB137E6D9AE8CBAD2B81EF7C8F6C5C514702D8EBDFA1BFA08D8FD41F08E9111735E9F4907AC22E91CD",
				"amount": "0x1bef1aff054f916982119",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x819e020e3f1eef1333b4c7a144013cce623b5a92",
				"pub_key": "0x35ABCD39995945162D4868FD5E09B16E3ADD98E4CE84BCB98E60BA4BBF7C5A168A785D08D7209165C66631003CC20119D0F00051FCEA7A4AD7CA6A9D9419BB3511093E935BB100306274C676411375BCE66A3DE0B6BF3F80026FDCEA5F249AC45F2CB41D46C39D59F92EA1992B4712D6B6B2CBD76C87017868F66C724321E17F",
				"amount": "0x2ca896e26a4b97dc92030",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xc91b4740013b79320503c0cf1708b8e4fb05f9a5",
				"pub_key": "0x2CC00D0A086AABBE7D308F8E098CF6C82F53B40790099775670E219490F94B9F81D4EB675FAF820C8E89C047EBCE7E0EA0435099803DD5CADF729CED30557C768C46295E0BD0B1DE49B6EEB494AF50FA3CCA36B414E977EC184A3A2B262537B41A8FB613EDD43B6BD72CCD2F71A701FD13670A46CADBF8D9F38CE89A2F3DAF64",
				"amount": "0xee05b8389c2b7dab9150",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xf1d72486483e60bfd8e5cfbd9df22ad15238b46e",
				"pub_key": "0x7A85FC166AEFDA6DE7E58D7A183FC2703C9B693E130691F3BA57494407787B9D701E1D003952604AEB50D18585DD3667E8CB0C8EC711FF54E9ABA8B4C86012122A88B34E890D7055DBC04C0AF67B5FF31CFC11A5B2A840117D64ABA02A573C370059FF9D1DCEF57181C4C02C9B8ADB7EC10F659AC02A759BECAA07358FCF03D9",
				"amount": "0x987eca2a8a6fea354927",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xf6a94ecd6347a051709f7f96061c6a0265b59181",
				"pub_key": "0x51590FCC056FBDD7E54F7E301DD346884BA70DB602ECBE7392F84D8CAC4DBBDE05A347F0391EC775920DA82795639FE46C581A852DD92C77B9E189585F3AA852477DF6E95FCD0F0291DE46C2A72F93FC5A5E1AF1902D419E54AFCB4BE2D2CAB338C3083DD4DAABCEDB470CF37EAF1E54ABF1953E48AAD29305F95C65D73CD71C",
				"amount": "0x1e8c966dc199354fa7918",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x97b2478672d246780e36deb632ec5dbb0fc231bb",
				"pub_key": "0x78A0D0FCDFD3C892A8A171C47F403FF2EE551C48879AF3DAB16335A974B12F5819DEDBA7D7E1F4A2E4A21FCCF882610319E5282FC1D0E8F3FD8237383C8CD85C3ECF9C04DF9BFD95B3B4F88E71EAADDD56F0CE0AD46184DD050DDECB83D9ABC10B166C0F6436748D48BE91AAD8BD672CE0C4FD20953907FF9AB1DC2DAFDF99BD",
				"amount": "0x243676db4842e1168000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xdccfb63166a623b5d9cb9481565101b667617cf9",
				"pub_key": "0x7A46671581FA7BC876AC5C84CA9EDB506DEB89D7ABE7F937830FBCD057EF1C9A7EEB5C3DC44D6497EF88D35DFDA8FD09007786548DE9C14B173FBEE9EC8C441F33236FFD9406CC9BCD5226D626C45E5A500D189FC543ABAD5CE06E1AE0417D72639A98FDE7643C489E8DC49892CA4044B94CF722CD5DBC597C9FA66365FFB031",
				"amount": "0x2e9e6547d26d5318480d7",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x9a4eb75fc8db5680497ac33fd689b536334292b0",
				"pub_key": "0x1D8087D78FEBB41187983FAF4B7376DA5D3C0EE2D8447A1FFF924F3191DE898D7F91CBED1F983BF1462E26A45D87AF6353172B8722D7E2A9A2AD99FB89842BF0494C150CCE1DCE46C5BE6DA51C7F6EA0C2A992AC1D4757A86AD3615E9BC56C720A35E1BB9C5298172E5F20C52B6D06CA3652175D411F0D2C16464D6DAB46DE37",
				"amount": "0x1a7891310bf22a5000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x913851b8d8afc4f6ac89241d3979e23424674d1f",
				"pub_key": "0x1EE1F10141F7F91F3F7D8F0DE829BD8290E3EA7B6173EB8512BD85141FFE1A605D5F6FAD47E00366FCD24F9E991AA091DFBB68D7F4B0925CA6E60F29F043F4B2341961176FE8147C4092A5584284A7887C361F20C164CF285D60C278BD792D7F454F0D3F32FE95FBD2FFC6C27E2C7D8DD2B28C5C74ADE6A0C1CA1CD7928EC7D3",
				"amount": "0x2a5d5b7d1e540bd2cc00",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xc56c8b2ffad06dc2c07a681e4af9f856400a70e4",
				"pub_key": "0x887CA947465140D870518EF7C3BB6F295A7351BAE7C7C58485A0B7A0C9963B69759E0BB2D2966C9BADBFC44217B4E10C546EFDE9ECBB9263DD86A3B316ADCF5738B4DDC303D0194CD4CE42E450540777A627D75F2B22029C09893273056396A13E4005739DA90195C7052BE44E31935A1E276730294919568B3606E54F5E76BF",
				"amount": "0x11a99b03f6b53f1a00000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xc7be103eef93ec9946d6bca67894ca80042895ee",
				"pub_key": "0x83BCAF0510605498CCE4F4B255AE85A672031EF27E2C93A1395E7093E483C76D54BF2B5391F42E98A2B83363736D293ABBEDECA2611E343C1BB769671EBF63F80F36C510F06BF1D23DAE65DD4302959F1D4F0C861342E93EB119B69DBDCAC9E02D784D9F5A8A36EE5FE37A8938C079A30E66A211929B4AD312954936BE3585FC",
				"amount": "0x6e08a819c73fbc9000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xdbee5cdbb6dd622b0b09ebe6d39e4902a54de8e4",
				"pub_key": "0x41B9B5D9EEF505CAE52A0CC1725E1BAC0B42B1E61C1E37DB38B575D0FBA8813C4F903E2CC44E0A135240E88F229AEF7C1ABD9DD92B9CE77A74780A405F75526C716511D0105D9956F57D563676189B30CFDF1DD67BC4DCBE95F13520811141146D10E9D9587C9B2E69601D502A47DB6C07F4400CF15E4585C87CBDC749C081D5",
				"amount": "0x5e7c6082cc08efa000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x6997c059fce895f155d4a3024507558659505cf3",
				"pub_key": "0x5BF0C02503DA126B840D9CBB8E2244F0FD658702A0EA7C2DCF63DE64DD3DEBE511C7A8AE1878CDE4BC3996769901D2F652C4981FCBA4CCA03DF00BEB86549CDC406CBB8AAB14EB1A875AD867FB05A07B87B01F8AD495720F758FCCEDC1680CC183B46858AF293527B7E29C5FA1DCA915C09FDC72637E1FBC84E56702E94569BA",
				"amount": "0x2a8f686830e441b000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x34f7b242142597e352096bc603e87c27f94dac1a",
				"pub_key": "0x434144F56F989C8FD47208E8708123DF2ABE5454B570B3953B9440335410CD90591FA51CDF74D3039A244C2A98B11A860D9B607BF8170CA6F00537B21E42985D39BC786DB69AE8AF053AD5DFE86D38EE5691320694431FC4BD55FADCE7B4C63C7B292443816F096E49811C71D2EA4F6C54AF7141B352307C6A2B84EC84B102E9",
				"amount": "0x1101c205a3e5f3aa78e06",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x635773ee3bab9c168a4ae3292f5d9b14ae10eaa0",
				"pub_key": "0x69D48E86A584D3B7E51CF0647B423BFF2D4CD381DA36AE9886E1DCA9AB0838C93895AEDFD290DA28771DD4A674CC48F0513B179C35390E2FA44D9873245AE66312921E645FE28235DBCF79CF1808CB0984492091CF7AE11CACB7F7C1C819EC383BF606F2E3C691952C6156127CAD93DC085EC36E0992BF1579064A60FE5330B9",
				"amount": "0x2c781f708c509f4000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x653da4278ec15cdcd14d985a5989468c2491009c",
				"pub_key": "0x39216CB930BFE5507EA782B2772CCD0BAB93C047A38935AF7C732D13171AAC7D86EEA2C7A3D26FA9A0CC70D5FB17ED1C8304FBB1E74F70373BAC15643A7F78CB245F88C0BE87C82EA9EDEB9533F0B0EFCBA0CE3BA3F239DE1235117AABA5E9F4834EE0FF33149D95C1CC8080335F9F84478C7736163D0096CADF5DA408F32EAE",
				"amount": "0x248c949ce58503aa0000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0xfd9cec784dde0d65a6517d0f24b2344bde1b4aac",
				"pub_key": "0x583CC312BC09F0CD529A489FF33D35A1CA8B9949C133F297F7A7FDCD6120C37A27C461DC17757DD1508B0FBAF856F5FF9EF68597515038E7B22317BBA8518D6A19F0747E78DADE384E336F855B83A392E385EA2E48FAC50208C7A3E1DBB58B2D7F0028CEAB06486CB0847DAE8AFB3AB980E3F64B0B27F88CC2E4BF1F7896F7C3",
				"amount": "0x16b108f6996acfb3be38f",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x3abdb31086de7a75f93c9ee4b3f5626afcf8ab67",
				"pub_key": "0x3B4777B8D0375CB136591BF6001F06C094A70B4E176EC81F1EAEBAE83B76A19D745B6B4C7502E168E7AF02DAB0EB195A8C4CC002070A071C21697BBCF0E714DE3B75BCDC20A04E9CAA21AF528BDBFDD1A1A2ECEC853E96982F4B31E3011540C620308F7E907A7147A96CF474EDF8FC64410D39F7A5EBB5EB4A74CFB2EA0160D2",
				"amount": "0x2cd4badaa0f39eed7203",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x905a374898130c7f974a1fcdc0b53a1d324d16ce",
				"pub_key": "0x32971B85102B88EE490FD94C7271A9A312A3A6138CEFF85AD346D56B0842E520241E3B69F358AC95F9C0F2555E4A2430EEAB1707385628EB0A78EF86060AAF3987A99209D34CA17A6C300DA12A80366A3D687B30A5FFB469460A9BDCC20ECAAA574BEE0E1FBA0D832F218344E23ABED62B6538472C657B7E0632E8DAAA0417E7",
				"amount": "0x2955d02e1a135a000000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x4cacc12227f6594c7b0d4b741cf751ddffeb86fb",
				"pub_key": "0x1D70873109612CCD6489EB123637846D1226366304D747C3C2A9DA15D76C418C63FDB6C5FD6A1504B1D3F9D300642156AC1291A84CBBE102DDF428C07521860E7917882BA1C27E53F82DA83F52409E1C847398E7A1CA1C973F5FC0477EDFA2DA2F127CEF68B86EE46E482FBE486E337232524C93B51F76C9480F37B5550E011F",
				"amount": "0x2295daeb2a2e1d0cf000",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x7491cf9eb06c7f12ddeeee6e3524bc83898c5343",
				"pub_key": "0x59C071673A79611783BB458F81C4D082DE51A5C7418A847A7241EC87FADF304804B10DCE6CDB6F541DBB5CFA396DE9D160024BD4FD47CACAB9C2F1F2C1AF934F5B953FA523AF09468ACF3782B2E9772D609C80BFADD98D2EA8342EFDF05DC58987A742754823A3B2365FA24160436868DFF4CA4E9913F56BFFA7968187E221FE",
				"amount": "0x1eef8e055601d06800000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x967a24daa9394faf0f2a1e1da8f11acfbec8e2a4",
				"pub_key": "0x3096C0344E07E96FB20FF62418479941D56F6EF01167F753D44B9703F2661F3F8370113BCD4C265DC1806FE9C70C404DE20E9B557360196B3648A00F902BEEA10D49AC4A106FF27F5F9E56CEE9E1145538A50640BAB17C4FA6BA3B17F874F64530058A22A3FCE1721A4421F10DC2EB6CA948F6C168F12266CEEAF66241F8D5D8",
				"amount": "0xb60bfba7109d35e71b00",
				"name": "",
				"epoch": "0x5"
			},
			{
				"address": "0x41e0a683ee564f73f1ca240d35e30a71a3848c14",
				"pub_key": "0x3460499F7952B00911D27E7EFB549DE0AA70AF22EF8AFF3DD8880E0347E7BA5A8ADAF5A02C864858B96FE3AA305818B788F3881EF79B1DDEB623A21D75548D685CF746C432203DF62ABC995628AD0F3CD5B627B43CE468744BCA474D226FFA8E68B9418E9E26CBE723ACCBD0B2126F752D122E494B5D7CF839517D62D278E02C",
				"amount": "0x100248c21e088b4000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xb05acbd235d8410eb8749702b669191d5d572bc8",
				"pub_key": "0x640ADF70CDC820E497F64AA8D9625D0C155E887E3037A8FCD8443CCE462D31C94907B1EC3D2CF750A974EFFE5978E6D15D13075D95B0BD7E43AE6CAFFA5EB614189DE69E6BDC968B44EF42538F24D7797F928FA94C38D90D0D5E719FF4022AEA82352E7C46E65DFD5E12C87FB196141148AAEB34393F45D9E3FEE62A30C62A0D",
				"amount": "0x1fc384dd7020794bb0000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xd06b6c1299c04b71febc1e6951458ebdd5a04f7d",
				"pub_key": "0x22390B662B14A9F43A3F97A4C60B9DAF60AAC3F31EFE7E2429057C0A8B3CC30B4097ECA0498A58AF4730C355663ED697495C325C1B29B200CC3EACD27AF96E147CF1378A279DB3B0BAE75C08BB20BDCDE7E186F41C39020A87612B288B217A4F39B143689C091209493860EC08DCEDC933638BC53A3DC1908DB6A5449F682D94",
				"amount": "0x16e988a40bd4b1a000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0xc46f7498d76ea5d15173edf0e6a9ba59c68f666a",
				"pub_key": "0x62D98F5CEF4F80489305726B96A72315B0DE7D43D21E380B66B923B77BBC50DD32A56DBFD8ABC1F3BEA4D20A2CDA6AD160541F71B5AFB0D7A910BB7EAF1A5C9455ACFA232EC2194E197B11550B812DF404E83ECF43BBB3CF1C9D26F76DD54B8E6857760819D0743737EB4DAE010A460BBC5BB18890D54449C37F45AA280D5D45",
				"amount": "0x2a5a058fc295ed0000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x6e6d80bd14a9a4c79a37fda65277045a0a8815a7",
				"pub_key": "0x0C0B0C637C1C14CA685BA9DB0D9B94F27F3D066980461668196671A8F7EA655345587A09CE97ACFD99F70EF51BECBB88AE4392C8DFF9BD1EAFF7E2D812986EDE8F72449FBA3B3B6B25CA7138255573EADA820F6F47C809604877CFE19F87B14D8CC3F91167A01FE718A043A78985B6A3697647F84794436333A8C923A966BBC2",
				"amount": "0x1fc3842bd1f071c000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x44461dfa999f908460898820664a13c2b0230fd2",
				"pub_key": "0x0340FACA16E8EE0247C23FF3D57603415DEF17339746668075030DE93F996D7F2A78186A690D03FE3E6592D38C633F0F58BF6D8A1D0423D91E7AD273B0882F903A985094758A3872BDDFD543BE8E8DB60E0B55FEB386A47FE4468D5EF722ADCE08B7250C53BD431A7F7E981D8797A93E5F9456E83DF5EA5493BCC57D60095011",
				"amount": "0x20d2911c36cdcae000000",
				"name": "",
				"epoch": "0xb"
			},
			{
				"address": "0x0b3ab1e226d382285dad43deeacccf839de98261",
				"pub_key": "0x2ED4B59A03513A8DD4ACE7CA50EF01774066B004969B759C1737131897110D1678B0C290A54E0DCEB3332ACC6D9CA8D7D22B5C893297F72A5FAC85FE337747B91E152F36E73D0F0765D3AD9F2BBE6D32B1EDA55BFD0B7900E5F6ACBEEE0153EA3F0BB9F7865A806767971602E56CE38F31DF6C6AA31B2FF306368F4EF5A952BE",
				"amount": "0x1fc3842bd1f071c000000",
				"name": "",
				"epoch": "0xb"
			}
		]
	}
}`

var TestnetGenesisJSON string = `{
  "chain_id": "testnet",
  "consensus": "pos",
  "genesis_time": "2019-04-03T03:06:53.671117545Z",
  "reward_scheme": {
		"total_reward": "0x1048fd8377628651b000000",
		"reward_first_year": "0x2091fb06eec50ca3600000",
		"epoch_no_per_year": "0xc",
		"total_year": "0x17"
	},
  "current_epoch": {
    "number": "0x0",
    "reward_per_block": "0x454f4a543d46b786",
    "start_block": "0x0",
    "end_block": "0xa0668",
    "validators": [
      {
        "amount": "0x2a5a058fc295ec000000",
        "epoch": "0xc",
        "address": "0xD2FD09246E2CED295411F1F863E6E7B5929BCC59",
        "name": "",
        "pub_key": "0x0C75143EB5952A46803215DAA3E8F53E2245501C2BCBA0285E624DE74C6DF703157710EBA5023EF1B082FC8ECA27670E131745ED01954A48892AD1F8CF2602303B2D37035353410982E31AC15BEF80902B38591593A312C9D917F2ED5C941164425FE4B19C1C65C3E2C31B544A3BABF85EE0BEEDE5D9E1F8C004C28A9C93E47F"
      },
      {
        "amount": "0x2a5a058fc295ec000000",
        "epoch": "0xc",
        "address": "0xC6179A651918888251380A4E3FEE6AF81CF091D1",
        "name": "",
        "pub_key": "0x72747AFEE21059D6BE594C815A280EF64620EE0BA502DF5A064AB45AC2D633CA106E6439414C8CB688FC3699566472F3A056471581713EA09B5E9C6216744CC68CCCA0A390A0088248DBC2679C9B9CD699631472C4000F64D77919A8472A75716D690F669F53DE3ED2919A1457D75FABDFB4ACD7BD8BAB35B7D6CD8B59CFC4A5"
      },
      {
        "amount": "0x2a5a058fc295ec000000",
        "epoch": "0xc",
        "address": "0x79CD31B59E3FAAB6DEEA68FBBAAFA4DA748BBDF6",
        "name": "",
        "pub_key": "0x7315DF293B07C52EF6C1FC05018A1CA4FB630F6DBD4F1216804FEDDC2F04CD2932A5AB72B6910145ED97A5FFA0CDCB818F928A8921FDAE8033BF4259AC3400552065951D2440C25A6994367E1DC60EE34B34CB85CD95304B24F9A07473163F1F24C79AC5CBEC240B5EAA80907F6B3EDD44FD8341BF6EB8179334105FEDE6E790"
      },
      {
        "address": "0x4CACBCBF218679DCC9574A90A2061BCA4A8D8B6C",
        "pub_key": "0x085586D41F70435700850E19B7DE54B3E793C5EC4C6EC502D19030EF4F2122823E5A765E56CBA7B4C57E50561F77B022313C39895CA303F3C95D7B7282412F334778B95ACE046A79AEA4DB148334527250C8895AC5DB80459BF5D367236B59AF2DB5C0254E30A6D8CD1FA10AB8A5D872F5EBD312D3160D3E4DD496973BDC75E0",
        "amount": "0x2a5a058fc295ec000000",
        "name": "",
        "epoch": "0x0"
      }
    ]
  }
}
`

func (ep OneEpochDoc) MarshalJSON() ([]byte, error) {
	type hexEpoch struct {
		Number         hexutil.Uint64     `json:"number"`
		RewardPerBlock *hexutil.Big       `json:"reward_per_block"`
		StartBlock     hexutil.Uint64     `json:"start_block"`
		EndBlock       hexutil.Uint64     `json:"end_block"`
		Validators     []GenesisValidator `json:"validators"`
	}
	var enc hexEpoch
	enc.Number = hexutil.Uint64(ep.Number)
	enc.RewardPerBlock = (*hexutil.Big)(ep.RewardPerBlock)
	enc.StartBlock = hexutil.Uint64(ep.StartBlock)
	enc.EndBlock = hexutil.Uint64(ep.EndBlock)
	if ep.Validators != nil {
		enc.Validators = ep.Validators
	}
	return json.Marshal(&enc)
}

func (ep *OneEpochDoc) UnmarshalJSON(input []byte) error {
	type hexEpoch struct {
		Number         hexutil.Uint64     `json:"number"`
		RewardPerBlock *hexutil.Big       `json:"reward_per_block"`
		StartBlock     hexutil.Uint64     `json:"start_block"`
		EndBlock       hexutil.Uint64     `json:"end_block"`
		Validators     []GenesisValidator `json:"validators"`
	}
	var dec hexEpoch
	if err := json.Unmarshal(input, &dec); err != nil {
		return err
	}
	ep.Number = uint64(dec.Number)
	ep.RewardPerBlock = (*big.Int)(dec.RewardPerBlock)
	ep.StartBlock = uint64(dec.StartBlock)
	ep.EndBlock = uint64(dec.EndBlock)
	if dec.Validators == nil {
		return errors.New("missing required field 'validators' for Genesis/epoch")
	}
	ep.Validators = dec.Validators
	return nil
}

func (gv GenesisValidator) MarshalJSON() ([]byte, error) {
	type hexValidator struct {
		Address        common.Address `json:"address"`
		PubKey         string         `json:"pub_key"`
		Amount         *hexutil.Big   `json:"amount"`
		Name           string         `json:"name"`
		RemainingEpoch hexutil.Uint64 `json:"epoch"`
	}
	var enc hexValidator
	enc.Address = gv.EthAccount
	enc.PubKey = gv.PubKey.KeyString()
	enc.Amount = (*hexutil.Big)(gv.Amount)
	enc.Name = gv.Name
	enc.RemainingEpoch = hexutil.Uint64(gv.RemainingEpoch)

	return json.Marshal(&enc)
}

func (rs *GenesisValidator) UnmarshalJSON(input []byte) error {
	type hexValidator struct {
		Address        common.Address `json:"address"`
		PubKey         string         `json:"pub_key"`
		Amount         *hexutil.Big   `json:"amount"`
		Name           string         `json:"name"`
		RemainingEpoch hexutil.Uint64 `json:"epoch"`
	}
	var dec hexValidator
	if err := json.Unmarshal(input, &dec); err != nil {
		return err
	}
	rs.EthAccount = dec.Address

	pubkeyBytes := common.FromHex(dec.PubKey)
	if dec.PubKey == "" || len(pubkeyBytes) != 128 {
		return errors.New("wrong format of required field 'pub_key' for Genesis/epoch/validators")
	}
	var blsPK crypto.BLSPubKey
	copy(blsPK[:], pubkeyBytes)
	rs.PubKey = blsPK

	if dec.Amount == nil {
		return errors.New("missing required field 'amount' for Genesis/epoch/validators")
	}
	rs.Amount = (*big.Int)(dec.Amount)
	rs.Name = dec.Name
	rs.RemainingEpoch = uint64(dec.RemainingEpoch)
	return nil
}

func (rs RewardSchemeDoc) MarshalJSON() ([]byte, error) {
	type hexRewardScheme struct {
		TotalReward        *hexutil.Big   `json:"total_reward"`
		RewardFirstYear    *hexutil.Big   `json:"reward_first_year"`
		EpochNumberPerYear hexutil.Uint64 `json:"epoch_no_per_year"`
		TotalYear          hexutil.Uint64 `json:"total_year"`
	}
	var enc hexRewardScheme
	enc.TotalReward = (*hexutil.Big)(rs.TotalReward)
	enc.RewardFirstYear = (*hexutil.Big)(rs.RewardFirstYear)
	enc.EpochNumberPerYear = hexutil.Uint64(rs.EpochNumberPerYear)
	enc.TotalYear = hexutil.Uint64(rs.TotalYear)

	return json.Marshal(&enc)
}

func (rs *RewardSchemeDoc) UnmarshalJSON(input []byte) error {
	type hexRewardScheme struct {
		TotalReward        *hexutil.Big   `json:"total_reward"`
		RewardFirstYear    *hexutil.Big   `json:"reward_first_year"`
		EpochNumberPerYear hexutil.Uint64 `json:"epoch_no_per_year"`
		TotalYear          hexutil.Uint64 `json:"total_year"`
	}
	var dec hexRewardScheme
	if err := json.Unmarshal(input, &dec); err != nil {
		return err
	}
	if dec.TotalReward == nil {
		return errors.New("missing required field 'total_reward' for Genesis/reward_scheme")
	}
	rs.TotalReward = (*big.Int)(dec.TotalReward)
	if dec.RewardFirstYear == nil {
		return errors.New("missing required field 'reward_first_year' for Genesis/reward_scheme")
	}
	rs.RewardFirstYear = (*big.Int)(dec.RewardFirstYear)

	rs.EpochNumberPerYear = uint64(dec.EpochNumberPerYear)
	rs.TotalYear = uint64(dec.TotalYear)

	return nil
}
